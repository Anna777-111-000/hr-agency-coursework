{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}{{ title }} - HR Agency{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <div class="mb-3">
        <a href="{% url 'candidate_list' %}" class="btn btn-outline-secondary">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
        </a>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    {% if messages %}
    <div class="messages mb-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">{{ title }}</h4>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                            </div>
                            <div class="col-md-4">
                                {{ form.first_name|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.last_name|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.patronymic|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.email|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.phone|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.age|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.experience_years|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.position_level|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üíº –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                            </div>
                            <div class="col-md-6">
                                {{ form.specialization|as_crispy_field }}
                            </div>
                            <div class="col-md-3">
                                {{ form.employment_status|as_crispy_field }}
                            </div>
                            <div class="col-md-3">
                                {{ form.work_format|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üè¢ –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã</h5>
                            </div>
                            <div class="col-md-6">
                                {{ form.last_workplace|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.last_position|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.work_period|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.responsibilities|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h5>
                            </div>
                            <div class="col-md-4">
                                {{ form.education_level|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.education_institution|as_crispy_field }}
                            </div>
                            <div class="col-md-4">
                                {{ form.education_specialty|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.graduation_year|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –ù–∞–≤—ã–∫–∏ -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üõ†Ô∏è –ù–∞–≤—ã–∫–∏</h5>
                            </div>
                            <div class="col-12">
                                {{ form.skills|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–µ–∫—Ä—É—Ç–µ—Ä–æ–≤ -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üîç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–µ–∫—Ä—É—Ç–µ—Ä–æ–≤</h5>
                            </div>
                            <div class="col-md-6">
                                {{ form.source|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.source_details|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.assigned_recruiter|as_crispy_field }}
                            </div>
                            <div class="col-md-6">
                                {{ form.desired_salary|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.notice_period|as_crispy_field }}
                            </div>
                        </div>

                        <!-- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –∏ —Ñ–∞–π–ª—ã -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                            </div>
                            <div class="col-12">
                                {{ form.recruiter_notes|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.next_actions|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.candidate_features|as_crispy_field }}
                            </div>
                            <div class="col-12">
                                {{ form.resume|as_crispy_field }}
                                <div class="form-text">
                                    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, DOC, DOCX. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB.
                                </div>
                            </div>
                        </div>

                        <!-- –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –≤–∞–∫–∞–Ω—Å–∏–∏ -->
                        {% if open_vacancies %}
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5 class="border-bottom pb-2">üìã –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –≤–∞–∫–∞–Ω—Å–∏–∏</h5>
                                <div class="mb-3">
                                    <label for="vacancy" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–∫–∞–Ω—Å–∏—é:</label>
                                    <select class="form-select" id="vacancy" name="vacancy_id">
                                        <option value="">-- –ù–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å --</option>
                                        {% for vacancy in open_vacancies %}
                                        <option value="{{ vacancy.id }}">{{ vacancy.title }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="form-text">
                                        –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∫ –≤–∞–∫–∞–Ω—Å–∏–∏ —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{% url 'candidate_list' %}" class="btn btn-secondary me-md-2">–û—Ç–º–µ–Ω–∞</a>
                            <button type="submit" class="btn btn-primary">
                                {% if candidate %}–û–±–Ω–æ–≤–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞{% else %}–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞{% endif %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    border: 1px solid #e9ecef;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}
.card-header {
    border-bottom: 1px solid #e9ecef;
    font-weight: 600;
}
.border-bottom {
    border-color: #dee2e6 !important;
}
</style>
{% endblock %}