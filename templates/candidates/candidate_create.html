<!-- templates/candidates/candidate_create.html -->
{% extends 'base.html' %}

{% block title %}{{ title|default:'–î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞' }} - HR System{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-10 mx-auto">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3 class="mb-0">{{ title|default:'‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞' }}</h3>
                        <a href="{% url 'candidate_list' %}" class="btn btn-light btn-sm">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
                    </div>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}

                        {% if form.errors %}
                        <div class="alert alert-danger">
                            <strong>–û—à–∏–±–∫–∞!</strong> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –Ω–∏–∂–µ.
                            {% for field, errors in form.errors.items %}
                                {% for error in errors %}
                                    <div><strong>{{ field }}:</strong> {{ error }}</div>
                                {% endfor %}
                            {% endfor %}
                        </div>
                        {% endif %}

                        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üë§ –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.last_name.label }}</label>
                                            {{ form.last_name }}
                                            {% if form.last_name.errors %}
                                            <div class="text-danger small">
                                                {{ form.last_name.errors.0 }}
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.first_name.label }}</label>
                                            {{ form.first_name }}
                                            {% if form.first_name.errors %}
                                            <div class="text-danger small">
                                                {{ form.first_name.errors.0 }}
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.patronymic.label }}</label>
                                            {{ form.patronymic }}
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.email.label }}</label>
                                            {{ form.email }}
                                            {% if form.email.errors %}
                                            <div class="text-danger small">
                                                {{ form.email.errors.0 }}
                                            </div>
                                            {% endif %}
                                            <div class="form-text">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.phone.label }}</label>
                                            {{ form.phone }}
                                            {% if form.phone.errors %}
                                            <div class="text-danger small">
                                                {{ form.phone.errors.0 }}
                                            </div>
                                            {% endif %}
                                            <div class="form-text">–§–æ—Ä–º–∞—Ç: +7 XXX XXX-XX-XX</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üíº –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.specialization.label }}</label>
                                            {{ form.specialization }}
                                            <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.position_level.label }}</label>
                                            {{ form.position_level }}
                                            {% if form.position_level.errors %}
                                            <div class="text-danger small">
                                                {{ form.position_level.errors.0 }}
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.experience_years.label }}</label>
                                            {{ form.experience_years }}
                                            <div class="form-text">–û—Ç 0 –¥–æ 50 –ª–µ—Ç</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.employment_status.label }}</label>
                                            {{ form.employment_status }}
                                            {% if form.employment_status.errors %}
                                            <div class="text-danger small">
                                                {{ form.employment_status.errors.0 }}
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.work_format.label }}</label>
                                            {{ form.work_format }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üìã –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.last_workplace.label }}</label>
                                            {{ form.last_workplace }}
                                            <div class="form-text">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.last_position.label }}</label>
                                            {{ form.last_position }}
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.work_period.label }}</label>
                                            {{ form.work_period }}
                                            <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: 2020-2023</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">{{ form.responsibilities.label }}</label>
                                    {{ form.responsibilities }}
                                    <div class="form-text">–ö–ª—é—á–µ–≤—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                                </div>
                            </div>
                        </div>

                        <!-- –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.education_level.label }}</label>
                                            {{ form.education_level }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.graduation_year.label }}</label>
                                            {{ form.graduation_year }}
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.education_institution.label }}</label>
                                            {{ form.education_institution }}
                                            <div class="form-text">–ù–∞–∑–≤–∞–Ω–∏–µ —É—á–µ–±–Ω–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.education_specialty.label }}</label>
                                            {{ form.education_specialty }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ò—Å—Ç–æ—á–Ω–∏–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üîç –ò—Å—Ç–æ—á–Ω–∏–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.source.label }}</label>
                                            {{ form.source }}
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.assigned_recruiter.label }}</label>
                                            {{ form.assigned_recruiter }}
                                            <div class="form-text">–§–ò–û —Ä–µ–∫—Ä—É—Ç–µ—Ä–∞</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">{{ form.source_details.label }}</label>
                                    {{ form.source_details }}
                                    <div class="form-text">–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –∏–ª–∏ –¥–µ—Ç–∞–ª–∏</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">{{ form.resume.label }}</label>
                                    {{ form.resume }}
                                    <div class="form-text">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, DOC, DOCX, TXT</div>
                                </div>
                            </div>
                        </div>

                        <!-- –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –æ–∂–∏–¥–∞–Ω–∏—è -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üéØ –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –æ–∂–∏–¥–∞–Ω–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.desired_salary.label }}</label>
                                            <div class="input-group">
                                                {{ form.desired_salary }}
                                                <span class="input-group-text">—Ä—É–±.</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">{{ form.notice_period.label }}</label>
                                            {{ form.notice_period }}
                                            <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: 2 –Ω–µ–¥–µ–ª–∏, —Å—Ä–∞–∑—É</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è —Ä–µ–∫—Ä—É—Ç–µ—Ä–∞ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è —Ä–µ–∫—Ä—É—Ç–µ—Ä–∞</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">{{ form.recruiter_notes.label }}</label>
                                    {{ form.recruiter_notes }}
                                    <div class="form-text">–ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">{{ form.next_actions.label }}</label>
                                    {{ form.next_actions }}
                                    <div class="form-text">–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">{{ form.candidate_features.label }}</label>
                                    {{ form.candidate_features }}
                                    <div class="form-text">–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</div>
                                </div>
                            </div>
                        </div>

                        <!-- –ù–∞–≤—ã–∫–∏ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">üõ†Ô∏è –ù–∞–≤—ã–∫–∏</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">{{ form.skills.label }}</label>
                                    {{ form.skills }}
                                    <div class="form-text mt-2">
                                        <strong>üí° –î–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞–≤—ã–∫–æ–≤:</strong><br>
                                        - <strong>Windows:</strong> –ó–∞–∂–º–∏—Ç–µ <kbd>Ctrl</kbd> –∏ –∫–ª–∏–∫–∞–π—Ç–µ –ø–æ –Ω–∞–≤—ã–∫–∞–º<br>
                                        - <strong>Mac:</strong> –ó–∞–∂–º–∏—Ç–µ <kbd>Cmd</kbd> –∏ –∫–ª–∏–∫–∞–π—Ç–µ –ø–æ –Ω–∞–≤—ã–∫–∞–º<br>
                                        - <strong>–î–ª—è –≤—ã–±–æ—Ä–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:</strong> –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π –Ω–∞–≤—ã–∫, –∑–∞—Ç–µ–º –∑–∞–∂–º–∏—Ç–µ <kbd>Shift</kbd> –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                        <div class="d-flex justify-content-between mt-4">
                            <a href="{% url 'candidate_list' %}" class="btn btn-secondary btn-lg">
                                ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
                            </a>
                            <button type="submit" class="btn btn-success btn-lg">
                                ‚úÖ {{ title|default:'–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞' }}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã */
select[multiple] {
    min-height: 150px;
}
.form-text {
    font-size: 0.875em;
    color: #6c757d;
}
.card {
    border: 1px solid #dee2e6;
    margin-bottom: 1rem;
}
.card-header.bg-light {
    background-color: #f8f9fa !important;
    border-bottom: 1px solid #dee2e6;
}
.form-control, .form-select {
    border-radius: 0.375rem;
    border: 1px solid #ced4da;
    padding: 0.375rem 0.75rem;
    width: 100%;
}
.form-control:focus, .form-select:focus {
    border-color: #86b7fe;
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}
.form-control.is-invalid, .form-select.is-invalid {
    border-color: #dc3545;
}
.form-control.is-invalid:focus, .form-select.is-invalid:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);
}
.text-danger {
    font-size: 0.875em;
}
kbd {
    background-color: #6c757d;
    color: white;
    padding: 0.1rem 0.3rem;
    border-radius: 0.2rem;
    font-size: 0.875em;
}
.input-group-text {
    background-color: #e9ecef;
    border: 1px solid #ced4da;
}
</style>

<script>
// –î–æ–±–∞–≤–ª—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª–µ–π
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const inputs = form.querySelectorAll('input, select, textarea');

    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            if (!this.checkValidity()) {
                this.classList.add('is-invalid');
            } else {
                this.classList.remove('is-invalid');
            }
        });

        input.addEventListener('input', function() {
            if (this.checkValidity()) {
                this.classList.remove('is-invalid');
            }
        });
    });
});
</script>
{% endblock %}