{% extends 'base.html' %}

{% block title %}{{ candidate.last_name }} {{ candidate.first_name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'candidate_list' %}">Кандидаты</a></li>
            <li class="breadcrumb-item active">{{ candidate.last_name }} {{ candidate.first_name }}</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h2>{{ candidate.last_name }} {{ candidate.first_name }} {{ candidate.patronymic }}</h2>
                </div>
                <div class="card-body">

                    <!-- Основная информация (для всех) -->
                    <h5>Контактная информация</h5>
                    <p><strong>Email:</strong> {{ candidate.email }}</p>
                    <p><strong>Телефон:</strong> {{ candidate.phone }}</p>

                    <!-- Профессиональная информация -->
                    <h5 class="mt-4">Профессиональная информация</h5>
                    <p><strong>Опыт работы:</strong> {{ candidate.work_experience_total }} лет</p>
                    <p><strong>Образование:</strong> {{ candidate.get_education_display }}</p>
                    <p><strong>Специальность:</strong> {{ candidate.specialty }}</p>

                    <!-- Для менеджеров и админов -->
                    {% if user.role == 'manager' or user.role == 'admin' %}
                    <h5 class="mt-4">Личная информация</h5>
                    <p><strong>Дата рождения:</strong> {{ candidate.birth_date }}</p>
                    <p><strong>Адрес:</strong> {{ candidate.address }}</p>
                    <p><strong>Семейное положение:</strong> {{ candidate.get_marital_status_display }}</p>
                    {% endif %}

                    <!-- Только для админов -->
                    {% if user.role == 'admin' %}
                    <h5 class="mt-4">Паспортные данные</h5>
                    <p><strong>Паспорт:</strong> {{ candidate.passport_series }} {{ candidate.passport_number }}</p>
                    <p><strong>Кем выдан:</strong> {{ candidate.passport_issued_by }}</p>
                    <p><strong>Дата выдачи:</strong> {{ candidate.passport_issue_date }}</p>
                    <p><strong>ИНН:</strong> {{ candidate.inn }}</p>
                    <p><strong>СНИЛС:</strong> {{ candidate.snils }}</p>
                    {% endif %}

                </div>
                <div class="card-footer text-muted">
                    Добавлен: {{ candidate.created_at|date:"d.m.Y H:i" }}
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h6>Информация о доступе</h6>
                </div>
                <div class="card-body">
                    <p><strong>Ваша роль:</strong> {{ user.get_role_display }}</p>
                    <p><strong>Уровень доступа:</strong>
                        {% if user.role == 'admin' %}Полный{% endif %}
                        {% if user.role == 'manager' %}Расширенный{% endif %}
                        {% if user.role == 'recruiter' %}Базовый{% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}