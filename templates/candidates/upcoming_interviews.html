{% extends 'base.html' %}

{% block title %}–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è - HR Agency{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1>üìÖ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è</h1>
            <p class="text-muted">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º–∏</p>
        </div>
        <a href="{% url 'candidate_list' %}" class="btn btn-outline-secondary">
            ‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º
        </a>
    </div>

    <!-- –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è (–Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ) -->
    <div class="card mb-4">
        <div class="card-header bg-warning text-dark">
            <h5 class="mb-0">
                ‚è∞ –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è (–Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ)
                <span class="badge bg-danger">{{ upcoming_interviews.count }}</span>
            </h5>
        </div>
        <div class="card-body">
            {% if upcoming_interviews %}
                {% for interview in upcoming_interviews %}
                <div class="interview-item mb-3 p-3 border rounded {% if forloop.last %}mb-0{% endif %}">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h6 class="mb-1">
                                <a href="{% url 'candidate_detail' interview.candidate.id %}" class="text-decoration-none">
                                    {{ interview.candidate.last_name }} {{ interview.candidate.first_name }} {{ interview.candidate.patronymic }}
                                </a>
                            </h6>
                            <div class="small text-muted">
                                <strong>–î–∞—Ç–∞:</strong> {{ interview.scheduled_date|date:"d.m.Y –≤ H:i" }}
                                ‚Ä¢ <strong>–¢–∏–ø:</strong> {{ interview.get_interview_type_display }}
                                {% if interview.candidate.specialization %}
                                ‚Ä¢ <strong>–î–æ–ª–∂–Ω–æ—Å—Ç—å:</strong> {{ interview.candidate.specialization }}
                                {% endif %}
                            </div>
                            {% if interview.notes %}
                            <div class="mt-1">
                                <small class="text-muted">{{ interview.notes }}</small>
                            </div>
                            {% endif %}
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="btn-group">
                                <a href="{% url 'candidate_detail' interview.candidate.id %}" class="btn btn-outline-primary btn-sm">
                                    üë§ –ü—Ä–æ—Ñ–∏–ª—å
                                </a>
                                <button class="btn btn-outline-success btn-sm" onclick="alert('–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
                                    üìÖ –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="text-center text-muted py-4">
                    <i class="fas fa-calendar-check fa-3x mb-3"></i>
                    <p>–ù–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ –∏ –ø–æ–∑–∂–µ -->
    <div class="card">
        <div class="card-header bg-light">
            <h5 class="mb-0">
                üìã –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ –∏ –ø–æ–∑–∂–µ
                <span class="badge bg-secondary">{{ later_interviews.count }}</span>
            </h5>
        </div>
        <div class="card-body">
            {% if later_interviews %}
                {% for interview in later_interviews %}
                <div class="interview-item mb-2 p-2 border rounded {% if forloop.last %}mb-0{% endif %}">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <strong>
                                <a href="{% url 'candidate_detail' interview.candidate.id %}" class="text-decoration-none">
                                    {{ interview.candidate.last_name }} {{ interview.candidate.first_name }}
                                </a>
                            </strong>
                            <div class="small text-muted">
                                {{ interview.scheduled_date|date:"d.m.Y –≤ H:i" }} ‚Ä¢ {{ interview.get_interview_type_display }}
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <a href="{% url 'candidate_detail' interview.candidate.id %}" class="btn btn-outline-primary btn-sm">
                                –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="text-center text-muted py-3">
                    <p>–ù–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.interview-item {
    transition: background-color 0.2s;
}
.interview-item:hover {
    background-color: #f8f9fa;
}
</style>
{% endblock %}